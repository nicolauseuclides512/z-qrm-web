(function(d,c){if(typeof module!=="undefined"&&module.exports){module.exports=c(require("jquery"))}else{if(typeof define==="function"&&define.amd){define(["jquery"],function(a){return c(a)})}else{c(d.jQuery)}}}(this,function(d){var f=function(a,b){this.$element=d(a);this.options=d.extend({},d.fn.typeahead.defaults,b);this.matcher=this.options.matcher||this.matcher;this.sorter=this.options.sorter||this.sorter;this.select=this.options.select||this.select;this.autoSelect=typeof this.options.autoSelect=="boolean"?this.options.autoSelect:true;this.highlighter=this.options.highlighter||this.highlighter;this.render=this.options.render||this.render;this.updater=this.options.updater||this.updater;this.displayText=this.options.displayText||this.displayText;this.source=this.options.source;this.delay=this.options.delay;this.$menu=d(this.options.menu);this.$appendTo=this.options.appendTo?d(this.options.appendTo):null;this.fitToElement=typeof this.options.fitToElement=="boolean"?this.options.fitToElement:false;this.shown=false;this.listen();this.showHintOnFocus=typeof this.options.showHintOnFocus=="boolean"||this.options.showHintOnFocus==="all"?this.options.showHintOnFocus:false;this.afterSelect=this.options.afterSelect;this.addItem=false;this.value=this.$element.val()||this.$element.text()};f.prototype={constructor:f,select:function(){var a=this.$menu.find(".active").data("value");this.$element.data("active",a);if(this.autoSelect||a){var b=this.updater(a);if(!b){b=""}this.$element.val(this.displayText(b)||b).text(this.displayText(b)||b).change();this.afterSelect(b)}return this.hide()},updater:function(a){return a},setSource:function(a){this.source=a},show:function(){var a=d.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});var l=typeof this.options.scrollHeight=="function"?this.options.scrollHeight.call():this.options.scrollHeight;var m;if(this.shown){m=this.$menu}else{if(this.$appendTo){m=this.$menu.appendTo(this.$appendTo);this.hasSameParent=this.$appendTo.is(this.$element.parent())}else{m=this.$menu.insertAfter(this.$element);this.hasSameParent=true}}if(!this.hasSameParent){m.css("position","fixed");var b=this.$element.offset();a.top=b.top;a.left=b.left}var o=d(m).parent().hasClass("dropup");var p=o?"auto":(a.top+a.height+l);var n=d(m).hasClass("dropdown-menu-right");var c=n?"auto":a.left;m.css({top:p,left:c}).show();if(this.options.fitToElement===true){m.css("width",this.$element.outerWidth()+"px")}this.shown=true;return this},hide:function(){this.$menu.hide();this.shown=false;return this},lookup:function(b){var c;if(typeof(b)!="undefined"&&b!==null){this.query=b}else{this.query=this.$element.val()||this.$element.text()||""}if(this.query.length<this.options.minLength&&!this.options.showHintOnFocus){return this.shown?this.hide():this}var a=d.proxy(function(){if(d.isFunction(this.source)){this.source(this.query,d.proxy(this.process,this))}else{if(this.source){this.process(this.source)}}},this);clearTimeout(this.lookupWorker);this.lookupWorker=setTimeout(a,this.delay)},process:function(b){var a=this;b=d.grep(b,function(c){return a.matcher(c)});b=this.sorter(b);if(!b.length&&!this.options.addItem){return this.shown?this.hide():this}if(b.length>0){this.$element.data("active",b[0])}else{this.$element.data("active",null)}if(this.options.addItem){b.push(this.options.addItem)}if(this.options.items=="all"){return this.render(b).show()}else{return this.render(b.slice(0,this.options.items)).show()}},matcher:function(a){var b=this.displayText(a);return ~b.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(j){var c=[];var k=[];var l=[];var a;while((a=j.shift())){var b=this.displayText(a);if(!b.toLowerCase().indexOf(this.query.toLowerCase())){c.push(a)}else{if(~b.indexOf(this.query)){k.push(a)}else{l.push(a)}}}return c.concat(k,l)},highlighter:function(a){var o=d("<div></div>");var i=this.query;var p=a.toLowerCase().indexOf(i.toLowerCase());var n=i.length;var r;var q;var c;var b;if(n===0){return o.text(a).html()}while(p>-1){r=a.substr(0,p);q=a.substr(p,n);c=a.substr(p+n);b=d("<strong></strong>").text(q);o.append(document.createTextNode(r)).append(b);a=c;p=a.toLowerCase().indexOf(i.toLowerCase())}return o.append(document.createTextNode(a)).html()},render:function(k){var c=this;var l=this;var j=false;var a=[];var b=c.options.separator;d.each(k,function(h,g){if(h>0&&g[b]!==k[h-1][b]){a.push({__type:"divider"})}if(g[b]&&(h===0||g[b]!==k[h-1][b])){a.push({__type:"category",name:g[b]})}a.push(g)});k=d(a).map(function(i,h){if((h.__type||false)=="category"){return d(c.options.headerHtml).text(h.name)[0]}if((h.__type||false)=="divider"){return d(c.options.headerDivider)[0]}var g=l.displayText(h);i=d(c.options.item).data("value",h);i.find("a").html(c.highlighter(g,h));if(g==l.$element.val()){i.addClass("active");l.$element.data("active",h);j=true}return i[0]});if(this.autoSelect&&!j){k.filter(":not(.dropdown-header)").first().addClass("active");this.$element.data("active",k.first().data("value"))}this.$menu.html(k);return this},displayText:function(a){return typeof a!=="undefined"&&typeof a.name!="undefined"&&a.name||a},next:function(b){var a=this.$menu.find(".active").removeClass("active");var c=a.next();if(!c.length){c=d(this.$menu.find("li")[0])}c.addClass("active")},prev:function(b){var a=this.$menu.find(".active").removeClass("active");var c=a.prev();if(!c.length){c=this.$menu.find("li").last()}c.addClass("active")},listen:function(){this.$element.on("focus",d.proxy(this.focus,this)).on("blur",d.proxy(this.blur,this)).on("keypress",d.proxy(this.keypress,this)).on("input",d.proxy(this.input,this)).on("keyup",d.proxy(this.keyup,this));if(this.eventSupported("keydown")){this.$element.on("keydown",d.proxy(this.keydown,this))}this.$menu.on("click",d.proxy(this.click,this)).on("mouseenter","li",d.proxy(this.mouseenter,this)).on("mouseleave","li",d.proxy(this.mouseleave,this)).on("mousedown",d.proxy(this.mousedown,this))},destroy:function(){this.$element.data("typeahead",null);this.$element.data("active",null);this.$element.off("focus").off("blur").off("keypress").off("input").off("keyup");if(this.eventSupported("keydown")){this.$element.off("keydown")}this.$menu.remove();this.destroyed=true},eventSupported:function(b){var a=b in this.$element;if(!a){this.$element.setAttribute(b,"return;");a=typeof this.$element[b]==="function"}return a},move:function(a){if(!this.shown){return}switch(a.keyCode){case 9:case 13:case 27:a.preventDefault();break;case 38:if(a.shiftKey){return}a.preventDefault();this.prev();break;case 40:if(a.shiftKey){return}a.preventDefault();this.next();break}},keydown:function(a){this.suppressKeyPressRepeat=~d.inArray(a.keyCode,[40,38,9,13,27]);if(!this.shown&&a.keyCode==40){this.lookup()}else{this.move(a)}},keypress:function(a){if(this.suppressKeyPressRepeat){return}this.move(a)},input:function(a){var b=this.$element.val()||this.$element.text();if(this.value!==b){this.value=b;this.lookup()}},keyup:function(a){if(this.destroyed){return}switch(a.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown){return}this.select();break;case 27:if(!this.shown){return}this.hide();break}},focus:function(a){if(!this.focused){this.focused=true;if(this.options.showHintOnFocus&&this.skipShowHintOnFocus!==true){if(this.options.showHintOnFocus==="all"){this.lookup("")}else{this.lookup()}}}if(this.skipShowHintOnFocus){this.skipShowHintOnFocus=false}},blur:function(a){if(!this.mousedover&&!this.mouseddown&&this.shown){this.hide();this.focused=false}else{if(this.mouseddown){this.skipShowHintOnFocus=true;this.$element.focus();this.mouseddown=false}}},click:function(a){a.preventDefault();this.skipShowHintOnFocus=true;this.select();this.$element.focus();this.hide()},mouseenter:function(a){this.mousedover=true;this.$menu.find(".active").removeClass("active");d(a.currentTarget).addClass("active")},mouseleave:function(a){this.mousedover=false;if(!this.focused&&this.shown){this.hide()}},mousedown:function(a){this.mouseddown=true;this.$menu.one("mouseup",function(b){this.mouseddown=false}.bind(this))}};var e=d.fn.typeahead;d.fn.typeahead=function(a){var b=arguments;if(typeof a=="string"&&a=="getActive"){return this.data("active")}return this.each(function(){var c=d(this);var i=c.data("typeahead");var j=typeof a=="object"&&a;if(!i){c.data("typeahead",(i=new f(this,j)))}if(typeof a=="string"&&i[a]){if(b.length>1){i[a].apply(i,Array.prototype.slice.call(b,1))}else{i[a]()}}})};d.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu" role="listbox"></ul>',item:'<li><a class="dropdown-item" href="#" role="option"></a></li>',minLength:1,scrollHeight:0,autoSelect:true,afterSelect:d.noop,addItem:false,delay:0,separator:"category",headerHtml:'<li class="dropdown-header"></li>',headerDivider:'<li class="divider" role="separator"></li>'};d.fn.typeahead.Constructor=f;d.fn.typeahead.noConflict=function(){d.fn.typeahead=e;return this};d(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(a){var b=d(this);if(b.data("typeahead")){return}b.typeahead(b.data())})}));